<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit CSV</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='styles.css') }}" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='scripts.js') }}"></script>
</head>
<body>
    <div class="container">
        <h1 class="mt-5">Editing: {{ filename }}</h1>
        <table id="csvTable" class="display table table-bordered">
            <thead>
                <tr>
                    {% for column in columns %}
                        <th class="{% if column in tooltip_columns %}has-tooltip{% endif %} 
                            {% if column == 'type' %}column-type{% endif %}">
                            {{ column }}
                            {% if column in tooltip_columns %}
                                <span class="tooltip-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="{{ column_tooltips[column] }}">?</span>
                            {% endif %}
                        </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                    <tr>
                        {% for col in columns %}
                            {% if col == 'type' %}
                                <td class="editable-cell dropdown-cell" data-col="{{ col }}">
                                    <span class="dropdown-toggle" data-bs-toggle="dropdown">{{ row[col] }}</span>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#" data-value="ordinal">ordinal</a></li>
                                        <li><a class="dropdown-item" href="#" data-value="binary">binary</a></li>
                                        <li><a class="dropdown-item" href="#" data-value="continuous">continuous</a></li>
                                        <li><a class="dropdown-item" href="#" data-value="nominal">nominal</a></li>
                                    </ul>
                                </td>
                            {% else %}
                                <td contenteditable="true" class="editable-cell" data-col="{{ col }}">{{ row[col] }}</td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <button class="btn btn-success mt-3" id="saveBtn">Save Changes</button>
    </div>
</body>
</html>
